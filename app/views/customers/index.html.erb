<p id="notice"><%= notice %></p>

<h1>Customers - Total: <%= Customer.count %> </h1>

<p>Create: <%= link_to 'New Customer', new_customer_path %></p>

<p>Sort by: 
<%= link_to "Vehicle Type", customers_path(order: 'vehicle_type') %>
<%= link_to "Full Name", customers_path(order: 'full_name') %>
</p>

<%= form_with url: customers_path, method: :get do |form| %>
  <%= form.label :search_by_first_name_or_last_name, "Search by Customer's First Name or Last Name:" %>
  <%= form.text_field :search_by_first_name_or_last_name %>
  <%= form.submit "Search" %>
<% end %>
<br>
<%= form_with url: customers_path, method: :get do |form| %>
  <%= form.label :search_vehicle_name, "Search by Vehicle Name:" %>
  <%= form.text_field :search_vehicle_name %>
  <%= form.submit "Search" %>
<% end %>
<br>

<%# <%= form_with(scope: "customer") do |f| %> 
  <%# <%= f.label :vehicle_type, "Sort by: Vehicle Type" %> 
  <%# <%= f.collection_select :id, Customer.order(vehicle_type: :asc), :id, :vehicle_type %> 
  <%# <%= f.select :id, @customers.map { |c| [c.vehicle_type, c.id] } %>
  <%# <%= f.submit "Sort" %> 
<%# <% end %> 

<div class="media">
  <div class="media-body">
    <table class="table table-hover">
      <thead>
        <tr>
          <%# <th>First name</th>
          <th>Last name</th> %>
          <th>Full Name</th>
          <th>Email</th>
          <th>Vehicle Name</th>
          <th>Vehicle Type</th>
          <th>Vehicle Length</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @customers.each do |customer| %>
          <tr>
            <%# <td><%= customer.first_name %>
            <%# <td><%= customer.last_name %>
            <td><%= customer.full_name%></td>
            <td><%= customer.email %></td>
            <td><%= customer.vehicle_name %></td>
            <td><%= customer.vehicle_type %></td>
            <td><%= customer.vehicle_length %> Feet</td>
            <td><%= link_to 'Show', customer %></td>
            <td><%= link_to 'Edit', edit_customer_path(customer) %></td>
            <%# <td><%= link_to 'Destroy', customer, method: :delete, data: { confirm: 'Are you sure?' }</td> %>
            <td><%= button_to 'Destroy', customer, method: :delete %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<br>

<h3>Import Customers</h3>
<%= form_tag import_customers_path, multipart: true do %>
  <%= file_field_tag :file %>
  <%= submit_tag "Upload File" %>
<% end %>

